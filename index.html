<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FY26 - SSA Reforecasting Planner</title>
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50">
  <div id="root"></div>

  <!-- React + ReactDOM UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel for in-browser JSX transform -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useMemo, useState } = React;
    const nf = new Intl.NumberFormat("en-US");

    function App() {
      // Core state
      const [teamGoal, setTeamGoal] = useState(18225); // FY26 total applications goal
      const [navigators, setNavigators] = useState(20); // 17–23 per prompt
      const [indGoal, setIndGoal] = useState(() => Math.ceil(18225 / 20)); // per-navigator annual goal

      // Ranges
      const NAV_MIN = 17;
      const NAV_MAX = 23;
      const IND_MIN = 500;   // floor
      const IND_MAX = 1500;  // ceiling
      const IND_STEP = 1;    // slider granularity

      // Derived calculations
      const capacity = useMemo(() => navigators * indGoal, [navigators, indGoal]);
      const meetsGoal = useMemo(() => capacity >= teamGoal, [capacity, teamGoal]);

      // Required counts/targets
      const requiredNavigators = useMemo(() => {
        if (indGoal <= 0) return 0;
        return Math.ceil(teamGoal / indGoal);
      }, [teamGoal, indGoal]);

      const requiredIndGoal = useMemo(() => {
        if (navigators <= 0) return 0;
        return Math.ceil(teamGoal / navigators);
      }, [teamGoal, navigators]);

      const requiredIndGoalMonthly = useMemo(() => {
        return Math.ceil((teamGoal / (navigators || 1)) / 12);
      }, [teamGoal, navigators]);

      // Precision helper for slider
      const bumpIndGoal = (delta) => {
        setIndGoal((g) => {
          const next = Math.min(IND_MAX, Math.max(IND_MIN, g + delta));
          return Math.round(next); // keep integer
        });
      };

      return (
        <div className="min-h-screen w-full bg-slate-50 text-slate-900">
          <div className="mx-auto max-w-5xl p-6">
            <header className="mb-6 flex items-start justify-between gap-4">
              <div>
                <h1 className="text-2xl md:text-3xl font-bold tracking-tight">FY26 - SSA Reforecasting Planner</h1>
                <p className="text-sm md:text-base text-slate-600 mt-1">
                  This tool allows for easy exploration of the trade-offs between three variables: A (the FY26 total SNAP application team goal for SSA), B (the number of full-time case assistance navigators (CAN's)), and C (the annual and monthly goals for each CAN). The first row of panels allows the user to manually adjust the values for those three variables, while the second row of panels summarizes how those “current settings” would project out into the key metrics of a potential re-forecasting.
                </p>
              </div>
            </header>

            {/* Top inputs */}
            <section className="grid md:grid-cols-3 gap-4 mb-6">
              {/* FY26 - SSA team goal */}
              <div className="bg-white rounded-2xl shadow p-4">
                <label className="block text-sm font-medium text-slate-700">
                  FY26 - SSA team goal
                  <div className="text-xs text-slate-500">(total SNAP applications)</div>
                </label>
                <div className="mt-2 flex items-center gap-2">
                  <span className="text-slate-500">#</span>
                  <input
                    type="number"
                    className="w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                    value={teamGoal}
                    min={0}
                    step={25}
                    onChange={(e) => setTeamGoal(Math.max(0, Number(e.target.value)))}
                  />
                </div>
              </div>

              {/* # of full-time CAN's */}
              <div className="bg-white rounded-2xl shadow p-4">
                <label className="block text-sm font-medium text-slate-700"># of full-time CAN's</label>
                <div className="mt-3">
                  <input
                    type="range"
                    min={NAV_MIN}
                    max={NAV_MAX}
                    value={navigators}
                    onChange={(e) => setNavigators(Number(e.target.value))}
                    className="w-full"
                  />
                  <div className="mt-2 flex items-center justify-between text-xs text-slate-500">
                    <span>{NAV_MIN}</span>
                    <span className="text-slate-900 font-semibold text-sm">{navigators}</span>
                    <span>{NAV_MAX}</span>
                  </div>
                  <div className="mt-1 grid grid-cols-7 text-[10px] text-slate-500">
                    {[17,18,19,20,21,22,23].map((n) => (
                      <div key={n} className="flex flex-col items-center justify-center leading-tight">
                        <div>|</div>
                        <div>{n}</div>
                      </div>
                    ))}
                  </div>
                </div>
                <p className="mt-2 text-xs text-slate-500">Constrained to range: 17–23.</p>
              </div>

              {/* Annual goal per CAN */}
              <div className="bg-white rounded-2xl shadow p-4">
                <label className="block text-sm font-medium text-slate-700">Annual goal per CAN</label>
                <div className="mt-3 flex items-center gap-2">
                  <input
                    type="range"
                    min={IND_MIN}
                    max={IND_MAX}
                    step={IND_STEP}
                    value={indGoal}
                    onChange={(e) => setIndGoal(Number(e.target.value))}
                    className="w-full"
                    aria-label="Annual goal per CAN slider"
                  />
                  {/* Precision helper buttons */}
                  <div className="flex flex-col gap-1">
                    <button
                      type="button"
                      onClick={() => bumpIndGoal(+1)}
                      className="px-2 py-1 bg-slate-100 hover:bg-slate-200 rounded-md border border-slate-200 text-xs"
                      title="Increase by 1"
                      aria-label="Increase by 1"
                    >
                      ▲
                    </button>
                    <button
                      type="button"
                      onClick={() => bumpIndGoal(-1)}
                      className="px-2 py-1 bg-slate-100 hover:bg-slate-200 rounded-md border border-slate-200 text-xs"
                      title="Decrease by 1"
                      aria-label="Decrease by 1"
                    >
                      ▼
                    </button>
                  </div>
                </div>
                <div className="mt-2 flex items-center justify-between text-xs text-slate-500">
                  <span>{nf.format(IND_MIN)}</span>
                  <span className="text-slate-900 font-semibold text-sm">{nf.format(indGoal)}</span>
                  <span>{nf.format(IND_MAX)}</span>
                </div>
              </div>
            </section>

            {/* Metrics row (4 panels) */}
            <section className="grid md:grid-cols-4 gap-4">
              {/* Annual capacity (based on current settings) */}
              <div className="bg-white rounded-2xl shadow p-4">
                <div className="text-xs uppercase tracking-wide text-slate-500">
                  Annual SNAP application capacity <span className="normal-case text-slate-400">(based on current settings)</span>
                </div>
                <div className={`text-2xl font-semibold mt-1 ${meetsGoal ? "text-emerald-600" : "text-rose-600"}`}>
                  {nf.format(capacity)}
                </div>
                <div className={`text-xs mt-1 ${meetsGoal ? "text-emerald-600" : "text-rose-600"}`}>
                  {meetsGoal ? "Meets or exceeds team goal" : "Below team goal"}
                </div>
              </div>

              {/* Required CAN's (based on current settings) */}
              <div className="bg-white rounded-2xl shadow p-4">
                <div className="text-xs uppercase tracking-wide text-slate-500">
                  Required CAN's<br />
                  <span className="normal-case text-slate-400">(based on current settings)</span>
                </div>
                <div className="text-2xl font-semibold mt-1">{nf.format(requiredNavigators)}</div>
                <div className="text-xs text-slate-500 mt-2">Current range: {NAV_MIN}–{NAV_MAX}</div>
                <div className={`text-xs mt-1 ${requiredNavigators >= NAV_MIN && requiredNavigators <= NAV_MAX ? "text-emerald-600" : "text-rose-600"}`}>
                  {requiredNavigators >= NAV_MIN && requiredNavigators <= NAV_MAX ? "Within range" : "Outside range"}
                </div>
              </div>

              {/* Required individual annual goal (based on current settings) */}
              <div className="bg-white rounded-2xl shadow p-4">
                <div className="text-xs uppercase tracking-wide text-slate-500">
                  Required individual annual goal <span className="normal-case text-slate-400">(based on current settings)</span>
                </div>
                <div className="text-2xl font-semibold mt-1">{nf.format(requiredIndGoal)}</div>
                <div className={`text-xs mt-1 ${indGoal >= requiredIndGoal ? "text-emerald-600" : "text-rose-600"}`}>
                  {indGoal >= requiredIndGoal ? "Meets or exceeds" : "Below requirement"}
                </div>
              </div>

              {/* Required monthly individual goal (based on current settings) */}
              <div className="bg-white rounded-2xl shadow p-4">
                <div className="text-xs uppercase tracking-wide text-slate-500">
                  Required monthly individual goal <span className="normal-case text-slate-400">(based on current settings)</span>
                </div>
                <div className="text-2xl font-semibold mt-1">{nf.format(requiredIndGoalMonthly)}</div>
                <div className={`text-xs mt-1 ${Math.ceil(indGoal / 12) >= requiredIndGoalMonthly ? "text-emerald-600" : "text-rose-600"}`}>
                  {Math.ceil(indGoal / 12) >= requiredIndGoalMonthly ? "Meets or exceeds" : "Below requirement"}
                </div>
              </div>
            </section>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
